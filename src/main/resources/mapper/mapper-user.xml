<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
 <!-- userVo 모든 게시물을 전달 -->
 <mapper namespace="com.site.mapper.UserMapper">
 
 	<!--  로그인 email,password 검색 -->
 	<select id="selectLogin" resultType="com.site.vo.UserVo">
 		SELECT *
 		FROM   USERS
 		WHERE  EMAIL = #{email}
 		AND    PASSWORD = #{password}
 	</select>
 	
 	<!-- 이메일 찾기 -->
 	<select id="selectSearchEmail" resultType="com.site.vo.UserVo">
 		SELECT *
 		FROM   USERS
 		WHERE  NAME = #{name}
 		AND	   PHONE_NO = #{phone_no}
 	</select>
 	
 	<!-- 비밀번호 찾기 -->
 	<select id="selectSearchPassword" resultType="com.site.vo.UserVo">
 		SELECT *
 		FROM   USERS
 		WHERE  NAME = #{name}
 		AND	   EMAIL = #{email}
 	</select>
 	
 	<!-- 회원가입 -->
 	<insert id="insertUserDo">
 		INSERT INTO USERS
 		VALUES
 		(#{email}, SEQ_USERS_NO.NEXTVAL, #{password},
 		#{name}, #{phone_no}, #{birth}, 1,
 		#{address1}, #{address2}, #{zipcode})
 	</insert>
 	
 	<!-- 아이디 중복체크 --> 
 	<select id="emailCheck" resultType="int">
 		SELECT COUNT(*)
 		FROM   USERS
 		WHERE  EMAIL = #{email}
 	</select>
 	
 	<!-- 임시 비밀번호 저장 -->
 	<update id="updatePassword">
 		UPDATE USERS
 		SET	   PASSWORD = #{temp_password}
 		WHERE  EMAIL = #{email}
 	</update>
 	
 
 </mapper>
